<!DOCTYPE html>
<html>
<head>
    <title>ë™ê¸°í™” í™€ì§ ê²°ê³¼ í‘œì‹œê¸°</title>
    <meta charset="UTF-8">
    <style>
        /* ------------------ ìŠ¤íƒ€ì¼ (CSS) ------------------ */
        body { margin: 0; padding: 0; background-color: #f9f9f9; font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #result-container {
            border: 3px solid #4A90E2;
            padding: 30px 40px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            max-width: 400px; 
            background-color: white;
        }
        .header { font-size: 22px; font-weight: bold; color: #333; margin-bottom: 20px; }
        #currentResult { 
            font-size: 90px; 
            font-weight: bold; 
            margin: 20px 0;
            transition: color 0.5s ease-in-out;
        }
        .odd { color: #e74c3c; /* í™€ìˆ˜: ë¹¨ê°• */ }
        .even { color: #337ab7; /* ì§ìˆ˜: íŒŒë‘ */ }
        #nextCycle { font-size: 16px; color: #666; margin-top: 10px; }
        #timer { font-size: 36px; font-weight: bold; color: #4A90E2; margin-bottom: 15px; }
        .info { font-size: 14px; color: #999; margin-top: 20px; }
        /* ------------------------------------------------ */
    </style>
</head>
<body>
<div id="result-container">
    <div class="header">ğŸ² KST 4ë¶„ ì£¼ê¸° í™€ì§ ê²°ê³¼</div>
    <div id="currentResult" class="odd">-</div>
    <div id="timer">00:00</div>
    <div id="nextCycle"></div>
    <div class="info">â€» ì´ ê²°ê³¼ëŠ” ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë™ì¼í•˜ê²Œ í‘œì‹œë©ë‹ˆë‹¤.</div>
</div>

<script>
// JavaScript ë¡œì§ (ìˆœìˆ˜ ë™ê¸°í™” ê³„ì‚°)
const KST_OFFSET_MS = 9 * 60 * 60 * 1000; // GMT+9
const CYCLE_DURATION_MS = 4 * 60 * 1000; // 4ë¶„ ì£¼ê¸°

let nextCycleTimer;

// ê²°ì •ë¡ ì  ë‚œìˆ˜ ìƒì„±ê¸° (ê²°ê³¼ë¥¼ ê³ ì •í•˜ê¸° ìœ„í•¨)
function lcgRandom(seed) {
    // KST ì‹œê°„ ê¸°ë°˜ ì‹œë“œ
    seed = (seed * 1664525 + 1013904223) & 0xFFFFFFFF; 
    return seed / 4294967296;
}

// ì‹œê°„ ë™ê¸°í™” ë° ê²°ê³¼ ê³„ì‚°
function getSynchronizedResult() {
    const now = new Date();
    const utcTime = now.getTime() + (now.getTimezoneOffset() * 60 * 1000);
    const kstTime = utcTime + KST_OFFSET_MS;
    
    // í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ 4ë¶„ ì£¼ê¸°ì˜ ì‹œë“œ (ëª¨ë‘ì—ê²Œ ë™ì¼)
    const currentSeed = Math.floor(kstTime / CYCLE_DURATION_MS);
    
    // ë‹¤ìŒ ì£¼ê¸° ì‹œì‘ ì‹œê°
    const nextCycleTimeMs = (currentSeed + 1) * CYCLE_DURATION_MS;
    const nextCycleDate = new Date(nextCycleTimeMs);
    
    // ì‹œë“œë¥¼ ì´ìš©í•´ ë‚œìˆ˜ ê²°ì •
    const prngValue = lcgRandom(currentSeed);
    const randomNumber = Math.floor(prngValue * 100) + 1;
    
    const isOdd = randomNumber % 2 !== 0;
    const result = isOdd ? 'í™€' : 'ì§';

    return { 
        nextCycleTime: nextCycleDate, 
        result, 
        number: randomNumber 
    };
}

// UI ì—…ë°ì´íŠ¸
function updateDisplay() {
    const { nextCycleTime, result, number } = getSynchronizedResult();
    const now = new Date();
    const utcTime = now.getTime() + (now.getTimezoneOffset() * 60 * 1000);
    const nowMs = utcTime + KST_OFFSET_MS;
    const diffMs = nextCycleTime.getTime() - nowMs;
    
    if (diffMs <= 0) {
        // ì •í™•íˆ ì£¼ê¸°ê°€ ë³€ê²½ë˜ëŠ” ì‹œì , ì¬ê³„ì‚°
        initResultDisplay(); 
        return;
    }

    const minutes = Math.floor(diffMs / (60 * 1000));
    const seconds = Math.floor((diffMs % (60 * 1000)) / 1000);

    const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
    const resultDiv = document.getElementById('currentResult');
    const timerDiv = document.getElementById('timer');
    const cycleDiv = document.getElementById('nextCycle');

    // ê²°ê³¼ í‘œì‹œ
    resultDiv.textContent = `${result} (${number})`;
    resultDiv.className = result === 'í™€' ? 'odd' : 'even';
    
    // íƒ€ì´ë¨¸ ë° ë‹¤ìŒ íšŒì°¨ ì‹œê° í‘œì‹œ
    timerDiv.textContent = timeString;
    cycleDiv.textContent = 
        `ë‹¤ìŒ ê²°ê³¼ê¹Œì§€ ë‚¨ì€ ì‹œê°„: ${nextCycleTime.toLocaleTimeString('ko-KR', { timeZone: 'Asia/Seoul', hour: '2-digit', minute: '2-digit' })}`;
}

function initResultDisplay() {
    if (nextCycleTimer) {
        clearInterval(nextCycleTimer);
    }
    
    updateDisplay();
    nextCycleTimer = setInterval(updateDisplay, 1000);
}

window.onload = initResultDisplay;
</script>
</body>
</html>
